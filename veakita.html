<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>veAKITA // Vitreous Odds Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --glass-bg: rgba(10, 12, 18, 0.7);
            --iridescent-gradient: linear-gradient(135deg, #00f2ff, #0066ff, #7000ff, #ff00c8, #ffcc00);
            --border-glow: rgba(255, 255, 255, 0.15);
        }

        body {
            background: radial-gradient(circle at 50% 50%, #1a1c2c 0%, #05060a 100%);
            color: #e2e8f0;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .vitreous-container {
            position: relative;
            background: var(--glass-bg);
            backdrop-filter: blur(24px) saturate(180%);
            border: 1px solid var(--border-glow);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            border-radius: 24px;
            overflow: hidden;
        }

        .iridescent-text {
            background: var(--iridescent-gradient);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: flow 8s linear infinite;
        }

        @keyframes flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .prism-dial {
            width: 280px;
            height: 280px;
            border-radius: 50%;
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: inset 0 0 40px rgba(0, 0, 0, 0.5);
        }

        .prism-dial::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 50%;
            padding: 2px;
            background: var(--iridescent-gradient);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0.5;
        }

        .glitch-mono {
            font-family: 'JetBrains Mono', monospace;
            text-shadow: 0 0 10px rgba(0, 242, 255, 0.3);
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.02);
            border-left: 2px solid rgba(0, 242, 255, 0.3);
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.05);
            border-left: 2px solid rgba(0, 242, 255, 0.8);
            transform: translateX(5px);
        }

        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }

        input[type="range"]::-webkit-slider-runnable-track {
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 18px;
            width: 18px;
            border-radius: 50%;
            background: #fff;
            margin-top: -7px;
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.8);
            cursor: pointer;
        }

        .grid-bg {
            background-image: linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 40px 40px;
            position: absolute;
            inset: 0;
            z-index: -1;
        }

        .jackpot-glow {
            position: absolute;
            top: -50px;
            right: -50px;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(112, 0, 255, 0.2) 0%, transparent 70%);
            filter: blur(40px);
            pointer-events: none;
        }

        .action-button {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            transition: 0.2s ease;
        }

        .action-button:hover {
            border-color: rgba(0, 242, 255, 0.5);
            transform: translateY(-1px);
        }

        .action-button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(0, 242, 255, 0.1), transparent 40%);
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .scanline {
            width: 100%;
            height: 2px;
            background: rgba(0, 242, 255, 0.05);
            position: absolute;
            animation: scan 3s linear infinite;
            z-index: 10;
            pointer-events: none;
        }

        @keyframes scan {
            0% { top: 0%; }
            100% { top: 100%; }
        }
    </style>
</head>
<body class="flex items-center justify-center p-6">
    <div class="grid-bg"></div>

    <main class="vitreous-container w-full max-w-5xl flex flex-col md:flex-row min-h-[700px]">
        <div class="scanline"></div>
        <div class="jackpot-glow"></div>

        <!-- Left: Strategy & Control Panel -->
        <div class="w-full md:w-2/5 p-8 border-r border-white/5 flex flex-col justify-between">
            <div>
                <header class="mb-10">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="w-2 h-2 rounded-full bg-cyan-400 animate-pulse shadow-[0_0_8px_cyan]"></span>
                        <span class="text-[10px] uppercase tracking-[0.2em] text-white/50 glitch-mono">Omnichain Synchronized // LZ-V2</span>
                    </div>
                    <h1 class="text-4xl font-extrabold tracking-tighter text-white">
                        veAKITA <span class="iridescent-text italic">Vault</span>
                    </h1>
                </header>

                <div class="space-y-6">
                    <div class="control-group">
                        <div class="flex justify-between text-xs font-semibold mb-3 tracking-wider text-white/40 uppercase">
                            <span>Swap Simulation</span>
                            <span class="text-cyan-400 glitch-mono" id="swap-val">$1,000</span>
                        </div>
                        <input type="range" id="swap-slider" min="1" max="10000" value="1000" class="mb-2">
                        <div class="flex justify-between text-[10px] text-white/20 font-mono">
                            <span>$1</span>
                            <span>$10,000 (CAP)</span>
                        </div>
                    </div>

                    <div class="control-group">
                        <div class="flex justify-between text-xs font-semibold mb-3 tracking-wider text-white/40 uppercase">
                            <span>Liquidity Lock Duration</span>
                            <span class="text-purple-400 glitch-mono" id="lock-val">2 Years</span>
                        </div>
                        <input type="range" id="lock-slider" min="0.01" max="4" step="0.01" value="2" class="mb-2">
                        <div class="flex justify-between text-[10px] text-white/20 font-mono">
                            <span>MIN (7D)</span>
                            <span>MAX (4Y)</span>
                        </div>
                    </div>

                    <div class="control-group pt-4">
                        <div class="flex justify-between text-xs font-semibold mb-3 tracking-wider text-white/40 uppercase">
                            <span>Locked Asset Value</span>
                            <span class="text-amber-400 glitch-mono" id="asset-val">$5,000</span>
                        </div>
                        <input type="range" id="asset-slider" min="0" max="10000" value="5000" class="mb-2">
                    </div>
                </div>
            </div>

            <div class="mt-8">
                <button class="action-button w-full py-4 rounded-xl text-xs font-bold uppercase tracking-widest text-white z-20">
                    <span class="relative z-10">Initialize Lock Sequence</span>
                </button>
                <p class="text-[9px] text-center mt-4 text-white/30 uppercase tracking-tighter">
                    Randomness strictly provided by Chainlink VRF v2.5
                </p>
            </div>
        </div>

        <!-- Center: Odds Visualizer -->
        <div class="w-full md:w-3/5 p-8 relative flex flex-col items-center justify-center bg-white/[0.01]">
            <div class="absolute top-8 right-8 text-right">
                <div class="text-[10px] uppercase tracking-widest text-white/30 mb-1">Current Jackpot</div>
                <div class="text-3xl font-extrabold glitch-mono text-white">$142,850.<span class="text-lg opacity-50">69</span></div>
            </div>

            <div class="prism-dial mb-12">
                <div class="text-center z-10">
                    <div class="text-[11px] uppercase tracking-[0.3em] text-white/40 mb-2 font-semibold">Probability</div>
                    <div class="text-6xl font-black glitch-mono text-white mb-1" id="prob-display">0.4560%</div>
                    <div class="text-[10px] uppercase tracking-widest text-cyan-400 font-bold" id="boost-display">2.1x Boost Applied</div>
                </div>
                
                <!-- SVG Decorative Rings -->
                <svg class="absolute inset-0 w-full h-full -rotate-90">
                    <circle cx="140" cy="140" r="130" stroke="rgba(255,255,255,0.05)" stroke-width="1" fill="none" />
                    <circle id="progress-ring" cx="140" cy="140" r="130" stroke="url(#irid)" stroke-width="4" fill="none" stroke-dasharray="816" stroke-dashoffset="600" stroke-linecap="round" />
                    <defs>
                        <linearGradient id="irid" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#00f2ff;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#7000ff;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>

            <div class="grid grid-cols-2 gap-4 w-full max-w-md">
                <div class="stat-card p-4 rounded-lg">
                    <div class="text-[9px] uppercase tracking-wider text-white/40 mb-1">Effective veAKITA</div>
                    <div class="text-xl font-bold glitch-mono text-white" id="ve-power">2,500.00</div>
                </div>
                <div class="stat-card p-4 rounded-lg">
                    <div class="text-[9px] uppercase tracking-wider text-white/40 mb-1">Yield Projection</div>
                    <div class="text-xl font-bold glitch-mono text-white">12.4% <span class="text-xs opacity-40 font-normal">APR</span></div>
                </div>
                <div class="stat-card p-4 rounded-lg">
                    <div class="text-[9px] uppercase tracking-wider text-white/40 mb-1">Swap Fee (Jackpot)</div>
                    <div class="text-xl font-bold glitch-mono text-white">6.9%</div>
                </div>
                <div class="stat-card p-4 rounded-lg">
                    <div class="text-[9px] uppercase tracking-wider text-white/40 mb-1">Expected Winner</div>
                    <div class="text-xl font-bold glitch-mono text-white">~$250k <span class="text-xs opacity-40 font-normal">Vol</span></div>
                </div>
            </div>

            <footer class="mt-12 w-full flex justify-between items-center border-t border-white/5 pt-6">
                <div class="flex gap-4">
                    <div class="text-[10px] text-white/40">
                        <span class="block font-bold text-white/60">STRATEGY</span>
                        Liquidity Auction
                    </div>
                    <div class="text-[10px] text-white/40">
                        <span class="block font-bold text-white/60">ORACLE</span>
                        Chainlink Feed
                    </div>
                </div>
                <div class="flex gap-2">
                    <div class="h-1.5 w-8 rounded-full bg-white/10"></div>
                    <div class="h-1.5 w-8 rounded-full bg-cyan-500/50"></div>
                    <div class="h-1.5 w-8 rounded-full bg-white/10"></div>
                </div>
            </footer>
        </div>
    </main>

    <script>
        const swapSlider = document.getElementById('swap-slider');
        const lockSlider = document.getElementById('lock-slider');
        const assetSlider = document.getElementById('asset-slider');
        
        const swapVal = document.getElementById('swap-val');
        const lockVal = document.getElementById('lock-val');
        const assetVal = document.getElementById('asset-val');
        
        const probDisplay = document.getElementById('prob-display');
        const boostDisplay = document.getElementById('boost-display');
        const vePowerDisplay = document.getElementById('ve-power');
        const progressRing = document.getElementById('progress-ring');

        function updateOdds() {
            const swap = parseFloat(swapSlider.value);
            const duration = parseFloat(lockSlider.value);
            const lockedAsset = parseFloat(assetSlider.value);

            // Update Labels
            swapVal.innerText = `$${swap.toLocaleString()}`;
            lockVal.innerText = `${duration.toFixed(2)} Years`;
            assetVal.innerText = `$${lockedAsset.toLocaleString()}`;

            // Calculate Boost (Max 2.5x at 4 years)
            const boostMultiplier = 1 + (1.5 * (duration / 4));
            
            // Voting Power (veAKITA) calculation based on duration
            const vePower = lockedAsset * (duration / 4);
            vePowerDisplay.innerText = vePower.toLocaleString(undefined, {minimumFractionDigits: 2});

            // Logic: Swap size up to locked value is boosted
            const boostedPortion = Math.min(swap, lockedAsset);
            const basePortion = Math.max(0, swap - lockedAsset);

            // Base rate: $1 = 0.0004%
            const baseRate = 0.0004;
            
            const probFromBoosted = (boostedPortion * baseRate) * boostMultiplier;
            const probFromBase = (basePortion * baseRate);
            
            let totalProb = probFromBoosted + probFromBase;
            
            // Max cap 10%
            totalProb = Math.min(totalProb, 10);

            // Update UI
            probDisplay.innerText = totalProb.toFixed(4) + '%';
            boostDisplay.innerText = `${boostMultiplier.toFixed(2)}x Boost Applied`;
            
            // Update Ring (Circumference ~816)
            const offset = 816 - (816 * (totalProb / 10));
            progressRing.style.strokeDashoffset = offset;

            // Shift colors based on probability
            const hue = 180 + (totalProb * 18); // Cyan to Purple/Pink
            progressRing.style.stroke = `hsl(${hue}, 100%, 50%)`;
        }

        [swapSlider, lockSlider, assetSlider].forEach(s => s.addEventListener('input', updateOdds));
        
        // Initial call
        updateOdds();
    </script>
</body>
</html>